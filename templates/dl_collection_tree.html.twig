{% if  errorMSG %}
    <span style="color:red; font-size: 20px; font-weight: bold;">{{ errorMSG }}</span>
{% else %}
    
    <style type="text/css">
        .collectionBrowser_css {
                width: auto;
                max-width: 750px;
                height: auto;
                border: solid 1px #BBB;
                background: #FFF;
                overflow: hidden;
                padding: 5px;
        }
       
        .loader-bg{
            position:fixed;
            padding:0;
            margin:0;
            top:0;
            left:0;
            width: 100%;
            height: 100%;
            background:rgba(255,255,255,0.7);
        }
        .loader {
            border: 11px solid #f3f3f3; /* Light grey */
            border-top: 11px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 2s linear infinite;
            position:absolute;
            left:50%; 
            top:50%;
            margin-left:-30px; /*image width/2 */
            margin-top:-30px; /*image height/2 */
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
    </style>
    
    <div id="loader-div">
        <div class="loader-bg">
            <div class="loader"></div>
        </div>
    </div>
   
    <div>
        {%  if resourceData['insideUri'] %}
            <div>
                <a href="/browser/oeaw_detail/{{ resourceData['insideUri'] }}"><span>Back to the resource</span></a>
                <br/><br/>
            </div>
        {% endif %}    
        {%  if resourceData['title'] %}
            <h2>{{ resourceData['title'] }} </h2>
        {% endif %}
        
    </div>
    
    <input type="hidden" id="insideUri" name="insideUri" value="{{ url }}">
    <input type="hidden" id="estDLTime" name="estDLTime" value="{{ resourceData['estDLTime'] }}">
    
    <div id="content_collection">
        <div class="single-res-overview single-res-overview-basic">
            <div class="res-property">
                <i class="material-icons">&#xE54E;</i>
                <span class="res-prop-label">Name:</span> 
                <span class="res-prop-value">
                    {% if resourceData['title'] %}
                        {{ resourceData['title'] }}
                    {% else %}    
                        There is no title
                    {% endif %}
                </span>
            </div>
            
                
            {% if resourceData['isPartOf'] %}     
            <div class="res-property">
                <i class="material-icons">device_hub</i>
                <span class="res-prop-label">Part Of:</span> 
                <span class="res-prop-value">
                    {{ resourceData['isPartOf'] }}
                </span>
            </div>
            {% endif %}
            
            {% if resourceData['license'] %} 
                <div class="res-property">
                    <i class="material-icons">copyright</i>
                    <span class="res-prop-label">License:</span> 
                    <span class="res-prop-value">
                        {{ resourceData['license'] }}
                    </span>
                </div>
            {% endif %}
                    
            <div class="res-property">
                <i class="material-icons">&#xE54E;</i>
                <span class="res-prop-label">Number of files:</span> 
                <span class="res-prop-value">
                     {% if resourceData['filesNum'] %}
                        {{ resourceData['filesNum'] }}
                    {% else %}    
                       Unknown
                    {% endif %}
                </span>
            </div>
            
            
            <div class="res-property">
                <i class="material-icons">&#xE54E;</i>
                <span class="res-prop-label">Sum. Size:</span> 
                <span class="res-prop-value">
                    {% if resourceData['formattedSize'] %}
                        {{ resourceData['formattedSize'] }}
                    {% else %}    
                        Unknown
                    {% endif %}
                </span>
            </div>
            {% if resourceData['estDLTime'] %}                
            <div class="res-property">
                <i class="material-icons">&#xE54E;</i>
                <span class="res-prop-label">Estimated <br>Download Time:</span> 
                <span class="res-prop-value" >
                    <span id="dl_time"> </span> <small>with you current download speed.</small>
                </span>
            </div>    
            {% endif %}
            <!-- ZIP DL fields -->
            <!--
            <div class="res-property">
                <i class="material-icons">&#xE54E;</i>
                <span class="res-prop-label">Selected files:</span> 
                <span class="res-prop-value" id="selected_files">
                </span>
            </div>    
            
            
            <div class="res-property">
                <i class="material-icons">&#xE54E;</i>
                <span class="res-prop-label">Zip est. dl time:</span> 
                <span class="res-prop-value" id="zip_dl_time">
                </span>
            </div>-->
            
            <div class="col-xs-12 text-center">
                <button id="collection_dl_info_button" class="res-act-button">Show usage information</button>
            </div>
            <div id="collection_dl_info">
                <br>
                In this view, you can download one or more files from the collection.
                <ul>
                    <li>
                        If you want to download just 1-1 specified file, then please click on the filename.
                    </li> 
                    <li>
                        If you want to download more than 1 file or the whole collection, then please use the checkboxes. <br>
                    </li>
                </ul>
                After the selection please press the "Prepare Collection To Download" button.<br>
                If you find Resource(s) with red font color, then this collection contains file(s) which needed higher rights to download.
                <br>
            </div>
            
            <div class="res-property" id="selected_files_size_div">
                <i class="material-icons">&#xE54E;</i>
                <span class="res-prop-label">Sel. files size:</span> 
                <span class="res-prop-value" id="selected_files_size">
                </span>
            </div>    
            
            <div class="col-xs-12 text-center" id="not_enough_permission" style="display:none">
                <span class="res-prop-value" style="color:red;"><b><center>You do not have enough rights to download the whole collection!</center></b></span>
            </div>
            
            <div class="col-xs-12 text-center" style="display:none;" id="getCollectionDiv" >
                <div class="res-act-button" style="">
                    <a href="#" id="getCollectionData" data-tableuri="{{url}}">Prepare Collection To Download</a>
                </div>
            </div>
                
            <div class="col-xs-12 text-center" style="display:none;" id="dl_link_txt">
                <b>You can download your selected files:</b>
            </div>
                
            <div class="col-xs-12 text-center" style="display:none;" id="dl_link">
                 <div class="res-act-button" >
                    <span class="res-prop-value">
                        <div id="dl_link_a">Download the Collection TAR</div>
                    </span>
                </div>
            </div>
            
            <!-- ZIP DL fields  end -->
            
            <br>
            <div style="margin-top: 15px;">
                <div class="res-property">
                    <i class="material-icons">search</i>
                    <span class="res-prop-label">Search inside the collection: </span> 
                    <input id="search-input" class="collection-input-format" />
                </div>    
            </div>
            <div id="collectionBrowser" class="collectionBrowser_css"></div>
            
        </div>
            
    </div>            
{% endif %}
    